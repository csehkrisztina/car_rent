<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Admin | Users</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/menu.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/users.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/general.css}" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>

<body>
    <div class="container-fluid menu">
        <a class="btn btn-md" th:href="@{/logout}" th:if="${isLoggedIn}">Logout</a>
        <a class="btn btn-md" th:href="@{/login}" th:if="${isLoggedIn} == false">Login</a>
        <a class="btn btn-md" th:href="@{/registration}" th:if="${isLoggedIn} == false">Registration</a>
        <a class="btn btn-md" th:href="@{/user/edit}" th:if="${isLoggedIn}">My account</a>
        <a class="btn btn-md" th:href="@{/admin/user/all}" th:if="${isAdmin}">Users</a>
        <a class="btn btn-md" th:href="@{/admin/car/all}" th:if="${isAdmin}">Cars</a>
        <a class="btn btn-md" th:href="@{/}">Home</a>

        <span id="logo">Car Rent</span>

    </div>

    <div class="container">
        <div class="alert alert-success alert-dismissable" th:if="${message}">
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
            <p th:text="${message}" />
        </div>
        <h2>Users</h2>
        <table id="users">
            <thead>
                <tr>
                    <td>Index</td>
                    <td>E-mail</td>
                    <td>Role</td>
                    <td>Actions</td>
                </tr>
            </thead>
            <tbody>
                <tr th:each="user,iterator : ${users}">
                    <td th:text="${iterator.index + 1}"></td>
                    <td th:text="${user.email}"></td>
                    <td th:text="${user.role}"></td>
                    <td>
                        <form th:action="@{/user/edit}" method="get" class="action">
                            <input type="hidden" name="email" th:value="${user.email}"/>
                            <button class="btn btn-md edit-btn" type="Submit">Edit</button>
                        </form>

                        <form th:action="@{/admin/user/delete}" method="get" class="action">
                            <input type="hidden" name="email" th:value="${user.email}"/>
                            <button class="btn btn-md delete-btn" type="Submit">Delete</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</body>
</html>